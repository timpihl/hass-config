custom_header:
  chevrons: false
  compact_mode: true
  editor_warnings: false
  footer_mode: false
  #header_css: 'padding: 5px;'

resources:
  - type: module
    url: /community_plugin/button-card/button-card.js
  - type: module
    url: /community_plugin/custom-header/custom-header.js
  - type: module
    url: /community_plugin/mini-media-player/mini-media-player-bundle.js
  - type: module
    url: /community_plugin/simple-weather-card/simple-weather-card-bundle.js
  - type: module
    url: /community_plugin/lovelace-card-mod/card-mod.js
  - type: module
    url: /community_plugin/lovelace-card-tools/card-tools.js
  - type: module
    url: /community_plugin/lovelace-fold-entity-row/fold-entity-row.js
  - type: module
    url: /community_plugin/lovelace-layout-card/layout-card.js
  - type: js
    url: /community_plugin/light-slider-card.js
  - type: module
    url: /community_plugin/popup-backdrop-filter.js
  - type: module
    url: /community_plugin/circle-sensor-card/circle-sensor-card.js
  - type: js
    url: /community_plugin/light-entity-card/light-entity-card.js
  - type: js
    url: /community_plugin/vertical-stack-in-card/vertical-stack-in-card.js
  - type: module
    url: /community_plugin/button-entity-row/button-entity-row.js

title: Toker
background: "center / cover no-repeat fixed url('/local/images/background-tiny.jpeg')"
views:

  - title: Home
    path: home
    icon: 'mdi:home'
    panel: true
    badges: []
    cards:

      - type: custom:layout-card
        layout: vertical
        cards:

##########################################################

          - type: 'custom:simple-weather-card'
            entity: weather.toker_home
            name: ''
            primary_info:
              - extrema
            secondary_info:
              - precipitation
            backdrop: 

##########################################################

          - type: conditional
            conditions:
              - entity: media_player.ultra
                state_not: 'off'
            card:
                type: 'custom:mini-media-player'
                entity: media_player.ultra
                icon: 'mdi:google-chrome'
                source: icon
                artwork: cover
                hide:
                  power_state: false
                  source: false
                  volume: true

##########################################################

          - type: horizontal-stack
            cards:

##########################################################

              - type: 'custom:button-card'
                name: Toker Tv Switch
                icon: 'mdi:power-standby'
                color_type: icon
                aspect_ratio: 1/1
                show_name: false
                show_state: false
                size: 25px

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: switch.turn_off
                  service_data:
                    entity_id: switch.tv_power
                
                hold_action:
                  action: more-info
                  haptic: heavy

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr
                  icon: null
                  img_cell:
                    - align-self: center
                    - text-align: center
                    - justify-self: center
                    - height: 25px
                    - width: 25px

##########################################################

              - type: 'custom:button-card'
                name: Volume Mute
                icon: 'mdi:volume-off'
                color_type: icon
                aspect_ratio: 1/1
                show_name: false
                show_state: false
                size: 25px

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: switch.turn_off
                  service_data:
                    entity_id: switch.stereo_mute

                hold_action:
                  action: more-info
                  haptic: heavy

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr
                  icon: null
                  img_cell:
                    - align-self: center
                    - text-align: center
                    - justify-self: center
                    - height: 30px
                    - width: 30px

##########################################################

              - type: 'custom:button-card'
                name: Volume Down
                icon: 'mdi:volume-minus'
                color_type: icon
                aspect_ratio: 1/1
                show_name: false
                show_state: false
                size: 25px

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: switch.turn_off
                  service_data:
                    entity_id: switch.soundbar_vol_down

                hold_action:
                  action: more-info
                  haptic: heavy

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr
                  icon: null
                  img_cell:
                    - align-self: center
                    - text-align: center
                    - justify-self: center
                    - height: 30px
                    - width: 30px

##########################################################

              - type: 'custom:button-card'
                name: Volume Up
                icon: 'mdi:volume-plus'
                color_type: icon
                aspect_ratio: 1/1
                show_name: false
                show_state: false
                size: 25px

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: switch.turn_off
                  service_data:
                    entity_id: switch.soundbar_vol_up

                hold_action:
                  action: more-info
                  haptic: heavy

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr
                  icon: null
                  img_cell:
                    - align-self: center
                    - text-align: center
                    - justify-self: center
                    - height: 30px
                    - width: 30px

##########################################################

          - type: horizontal-stack
            cards:
            
##########################################################

              - type: 'custom:button-card'
                name: Glue
                entity: lock.glue
                aspect_ratio: 1/1
                show_name: true
                show_state: true
                size: 25px

                tap_action:
                  action: toggle
                  haptic: heavy

                double_tap_action:
                  action: toggle
                  haptic: heavy

                hold_action:
                  action: more-info
                  haptic: heavy

                state:
                  - styles:
                      card:
                        - filter: opacity(50%)
                      icon:
                        - filter: grayscale(100%)
                    value: locked

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i" "n" "s"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr min-content min-content
                  img_cell:
                    - align-self: start
                    - text-align: start
                    - justify-self: start
                    - padding-left: 10px
                    - height: 25px
                    - width: 25px
                  name:
                    - justify-self: start
                    - padding-left: 10px
                    - font-weight: bold
                    - font-size: 12px
                  state:
                    - justify-self: start
                    - padding-left: 10px
                    - font-size: 12px

##########################################################

              - type: 'custom:button-card'
                color_type: blank-card

              - type: 'custom:button-card'
                color_type: blank-card

              - type: 'custom:button-card'
                color_type: blank-card

##########################################################

          - type: horizontal-stack
            cards:

##########################################################

              - type: 'custom:button-card'
                entity: light.hallen
                name: Hallen
                icon: 'mdi:hanger'
                aspect_ratio: 1/1
                show_name: true
                show_state: true
                size: 25px

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.hallen

                double_tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.hallen

                hold_action:
                  #action: more-info
                  #haptic: heavy
                  
                  action: call-service
                  haptic: heavy
                  service: browser_mod.popup
                  service_data:
                    title: Hallen
                    card:
                      type: entities
                      entities:
                        - light.hallen
                    deviceID:
                      - this

                state:
                  - styles:
                      card:
                        - filter: opacity(50%)
                      icon:
                        - filter: grayscale(100%)
                    value: 'off'

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i" "n" "s"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr min-content min-content
                  img_cell:
                    - align-self: start
                    - text-align: start
                    - justify-self: start
                    - padding-left: 10px
                    - height: 25px
                    - width: 25px
                  name:
                    - justify-self: start
                    - padding-left: 10px
                    - font-weight: bold
                    - font-size: 12px
                  state:
                    - justify-self: start
                    - padding-left: 10px
                    - font-size: 12px

##########################################################

              - type: 'custom:button-card'
                entity: light.koket
                name: Köket
                icon: 'mdi:food'
                aspect_ratio: 1/1
                show_name: true
                show_state: true
                size: 25px

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.koket

                double_tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.koket

                hold_action:
                  action: more-info
                  haptic: heavy

                state:
                  - styles:
                      card:
                        - filter: opacity(50%)
                      icon:
                        - filter: grayscale(100%)
                    value: 'off'

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i" "n" "s"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr min-content min-content
                  img_cell:
                    - align-self: start
                    - text-align: start
                    - justify-self: start
                    - padding-left: 10px
                    - height: 25px
                    - width: 25px
                  name:
                    - justify-self: start
                    - padding-left: 10px
                    - font-weight: bold
                    - font-size: 12px
                  state:
                    - justify-self: start
                    - padding-left: 10px
                    - font-size: 12px

##########################################################

              - type: 'custom:button-card'
                entity: light.vardagsrummet
                name: Loungé
                icon: 'mdi:youtube-tv'
                aspect_ratio: 1/1
                show_name: true
                show_state: true
                size: 25px

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.vardagsrummet

                double_tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.vardagsrummet

                hold_action:
                  action: more-info
                  haptic: heavy

                state:
                  - styles:
                      card:
                        - filter: opacity(50%)
                      icon:
                        - filter: grayscale(100%)
                    value: 'off'

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i" "n" "s"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr min-content min-content
                  img_cell:
                    - align-self: start
                    - text-align: start
                    - justify-self: start
                    - padding-left: 10px
                    - height: 25px
                    - width: 25px
                  name:
                    - justify-self: start
                    - padding-left: 10px
                    - font-weight: bold
                    - font-size: 12px
                  state:
                    - justify-self: start
                    - padding-left: 10px
                    - font-size: 12px

##########################################################

              - type: 'custom:button-card'
                entity: light.sovrummet
                name: Sovrum
                icon: 'mdi:hotel'
                aspect_ratio: 1/1
                show_name: true
                show_state: true
                size: 25px

                style: |
                  ha-card {
                    
                  }

                tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.sovrummet

                double_tap_action:
                  action: call-service
                  haptic: heavy
                  service: |
                    [[[
                      if (entity.state == 'on') return 'light.turn_off';
                      if (entity.state == 'off') return 'light.turn_on';
                    ]]]
                  service_data:
                    entity_id: light.sovrummet

                hold_action:
                  action: more-info
                  haptic: heavy
                            
                state:
                  - styles:
                      card:
                        - filter: opacity(50%)
                      icon:
                        - filter: grayscale(100%)
                    value: 'off'

                styles:
                  card:
                    - padding: 5px
                  grid:
                    - grid-template-areas: '"i" "n" "s"'
                    - grid-template-columns: 1fr
                    - grid-template-rows: 1fr min-content min-content
                  img_cell:
                    - align-self: start
                    - text-align: start
                    - justify-self: start
                    - padding-left: 10px
                    - height: 25px
                    - width: 25px
                  name:
                    - justify-self: start
                    - padding-left: 10px
                    - font-weight: bold
                    - font-size: 12px
                  state:
                    - justify-self: start
                    - padding-left: 10px
                    - font-size: 12px

##########################################################

          - break
          - type: entities
            show_header_toggle: false
            entities:

              - type: 'custom:fold-entity-row'
                head:
                  entity: light.hallen
                  icon: 'mdi:hanger'
                  label: Hallen
                entities:
                  - light.hallen_a
                  - light.hallen_b
                  - light.hallen_c
                group_config:
                  secondary_info: last-changed
                padding: 0

              - type: 'custom:fold-entity-row'
                head:
                  entity: light.koket
                  icon: 'mdi:food'
                  label: Köket
                entities:
                  - light.spot_a
                  - light.spot_b
                  - light.spot_c
                  - light.flakt_a
                  - light.flakt_b
                  - light.koksbanken
                  - light.koksbordet
                  - light.koksfonstret
                group_config:
                  secondary_info: last-changed
                padding: 0

              - type: 'custom:fold-entity-row'
                head:
                  entity: light.koksbordet
                  icon: 'mdi:table-chair'
                  label: Köksbordet
                entities:
                  - light.filament_a
                  - light.filament_b
                group_config:
                  secondary_info: last-changed
                padding: 0

              - type: 'custom:fold-entity-row'
                head:
                  entity: light.vardagsrummet
                  icon: 'mdi:youtube-tv'
                  label: Vardagsrummet
                entities:
                  - light.glas_a
                  - light.glas_b
                  - light.glas_c
                  - light.top_a
                  - light.top_b
                  - light.top_c
                  - light.vardagsrumsfonstret
                  - light.spots_tv
                group_config:
                  secondary_info: last-changed
                padding: 0

              - type: 'custom:fold-entity-row'
                head:
                  entity: light.sovrummet
                  icon: 'mdi:hotel'
                  label: Sovrummet
                entities:
                  - light.sanglampa_k
                  - light.sanglampa_t
                  - light.strip
                group_config:
                  secondary_info: last-changed
                padding: 0

##########################################################

  - title: Camera
    path: camera
    icon: 'mdi:camera'
    badges: []
    cards:

##########################################################

      - type: picture-glance
        title: Köket
        camera_view: live
        camera_image: camera.pcm
        image: 'https://www.home-assistant.io/images/merchandise/shirt-frontpage.png'
        aspect_ratio: 0%
        tap_action:
          action: toggle
        entities:
          - entity: light.hallen
            icon: 'mdi:hanger'
          - entity: light.koket
            icon: 'mdi:food'
          - entity: light.koksbordet
            icon: 'mdi:table-chair'
                
##########################################################

      - type: picture-glance
        camera_image: camera.sveavagen_norr
        image: 'https://www.home-assistant.io/images/merchandise/shirt-frontpage.png'
        aspect_ratio: 80%
        entities: []
        
                
##########################################################

      - type: picture-glance
        camera_image: camera.sveavagen_soder
        image: 'https://www.home-assistant.io/images/merchandise/shirt-frontpage.png'
        aspect_ratio: 80%
        entities: []
                
##########################################################

      - type: picture-glance
        camera_image: camera.mot_bromma
        image: 'https://www.home-assistant.io/images/merchandise/shirt-frontpage.png'
        aspect_ratio: 80%
        entities: []
                
##########################################################

      - type: picture-glance
        camera_image: camera.fran_bromma
        image: 'https://www.home-assistant.io/images/merchandise/shirt-frontpage.png'
        aspect_ratio: 80%
        entities: []
        
##########################################################

  - title: Dev
    path: dev
    icon: 'mdi:dev-to'
    panel: true
    badges: []
    cards: []